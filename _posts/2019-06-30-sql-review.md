---
layout: post
title: sql review
---

Things got a bit busy at work (it's quarter-end, so a lot of data related stuff has to be done). Have a preliminary database schema set up to migrate an old access database to sql server, but want to review it sometime in July before building it out. 

Last week I was working on something very (very) small in AWS Redshift and learned that it's based on Postgres 8 so... it turns out you can't use things like generate_series. Or, well, you can... sort of... but it can't be joined to tables so... yeah. That experience made me want to do a quick review of SQL so ran through some Vertabelo exercises, specifically the ones specific to sql server and postgres. I use a fair amount of sql at work, but 99% of my everyday stuff is really basic (select * from x inner join y where z) and the few that are complicated I put together ages ago and saved. I guess if I have free time I can practice some more by refactoring them since they were built out hodge podge style and could really use a review. 

Have put a project on hold mostly because I'm puzzled about the data. The St Louis Fed put out <a href="https://www.stlouisfed.org/publications/regional-economist/first-quarter-2019/unequal-recovery-measuring-financial-distress">a really nifty paper</a> using IRS data at the zip code level that I wanted to ~~hijack~~ replicate for something else but ran into issues with reconciling securities holdings data for households. There are two major public sources of data for it (one if you count by institution) - Flow of Funds (Fed) and Survey of Consumer Finances (also Fed) and the differences are pretty large; as far as I can tell there's something like a 3T+ difference between the two. And since they didn't bother really addressing it at all in the paper (they just went with FoF data) I've put this on hold while I ask around with a few contacts to bounce ideas off of. I hope people come back to me with something other than "I think it's wrap accounts" but I'm not holding my breath. 